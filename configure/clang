#!/usr/bin/env bash

if [[ $0 != $BASH_SOURCE ]]; then
    echo "do not source this script"
    return 1
fi

SCRIPT_PATH=`(dirname $BASH_SOURCE)`
BUILD_PATH=`(realpath ${SCRIPT_PATH}/../.build)`

export CC=`(which clang-18)`
export CXX=`(which clang++-18)`

# TODO: allow optional use of libc++

cmake                                           \
    -B $BUILD_PATH                              \
    --preset debug                              \
    -DVCPKG_TARGET_TRIPLET="nil-libcxx"         \
    -DVCPKG_HOST_TRIPLET="nil-libcxx"